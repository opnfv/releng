---
##############################################
# job configuration for docker build and push
##############################################

- project:

    name: opnfv-docker-arm

    master: &master
      stream: master
      branch: '{stream}'
      disabled: false
    euphrates: &euphrates
      stream: euphrates
      branch: 'stable/{stream}'
      disabled: false
    fraser: &fraser
      stream: fraser
      branch: 'stable/{stream}'
      disabled: false
    gambia: &gambia
      stream: gambia
      branch: 'stable/{stream}'
      disabled: false
    dovetail-arm-receivers: &dovetail-arm-receivers
      receivers: >
          cristina.pauna@enea.com
          alexandru.avadanii@enea.com
    storperf-arm-receivers: &storperf-arm-receivers
      receivers: >
          cristina.pauna@enea.com
          alexandru.avadanii@enea.com
          mark.beierl@emc.com
    yardstick-arm-receivers: &yardstick-arm-receivers
      receivers: >
          cristina.pauna@enea.com
          alexandru.avadanii@enea.com
          delia.popescu@enea.com
    other-receivers: &other-receivers
      receivers: ''

    dockerfile: "Dockerfile"
    dockerdir: "docker"
    docker_repo_name: "opnfv/{project}_aarch64"
    arch_tag: ""

    # yamllint disable rule:key-duplicates
    dockerrepo:
      # projects with jobs for master
      - 'dovetail':
          project: 'dovetail'
          <<: *master
          <<: *dovetail-arm-receivers
      - 'storperf-master':
          project: 'storperf'
          dockerdir: 'docker/storperf-master'
          docker_repo_name: 'opnfv/storperf-master'
          arch_tag: 'aarch64'
          <<: *master
          <<: *storperf-arm-receivers
      - 'storperf-graphite':
          project: 'storperf'
          dockerdir: 'docker/storperf-graphite'
          docker_repo_name: 'opnfv/storperf-graphite'
          arch_tag: 'aarch64'
          <<: *master
          <<: *storperf-arm-receivers
      - 'storperf-httpfrontend':
          project: 'storperf'
          dockerdir: 'docker/storperf-httpfrontend'
          docker_repo_name: 'opnfv/storperf-httpfrontend'
          arch_tag: 'aarch64'
          <<: *master
          <<: *storperf-arm-receivers
      - 'storperf-reporting':
          project: 'storperf'
          dockerdir: 'docker/storperf-reporting'
          docker_repo_name: 'opnfv/storperf-reporting'
          arch_tag: 'aarch64'
          <<: *master
          <<: *storperf-arm-receivers
      - 'storperf-swaggerui':
          project: 'storperf'
          dockerdir: 'docker/storperf-swaggerui'
          docker_repo_name: 'opnfv/storperf-swaggerui'
          arch_tag: 'aarch64'
          <<: *master
          <<: *storperf-arm-receivers
      - 'yardstick':
          project: 'yardstick'
          <<: *master
          <<: *yardstick-arm-receivers
      # projects with jobs for stable/euphrates
      - 'dovetail':
          project: 'dovetail'
          <<: *euphrates
          <<: *dovetail-arm-receivers
      - 'storperf-master':
          project: 'storperf'
          dockerdir: 'docker/storperf-master'
          docker_repo_name: 'opnfv/storperf-master'
          arch_tag: 'aarch64'
          <<: *gambia
          <<: *storperf-arm-receivers
      - 'storperf-graphite':
          project: 'storperf'
          dockerdir: 'docker/storperf-graphite'
          docker_repo_name: 'opnfv/storperf-graphite'
          arch_tag: 'aarch64'
          <<: *gambia
          <<: *storperf-arm-receivers
      - 'storperf-httpfrontend':
          project: 'storperf'
          dockerdir: 'docker/storperf-httpfrontend'
          docker_repo_name: 'opnfv/storperf-httpfrontend'
          arch_tag: 'aarch64'
          <<: *gambia
          <<: *storperf-arm-receivers
      - 'storperf-reporting':
          project: 'storperf'
          dockerdir: 'docker/storperf-reporting'
          docker_repo_name: 'opnfv/storperf-reporting'
          arch_tag: 'aarch64'
          <<: *gambia
          <<: *storperf-arm-receivers
      - 'storperf-swaggerui':
          project: 'storperf'
          dockerdir: 'docker/storperf-swaggerui'
          docker_repo_name: 'opnfv/storperf-swaggerui'
          arch_tag: 'aarch64'
          <<: *gambia
          <<: *storperf-arm-receivers
      - 'yardstick':
          project: 'yardstick'
          <<: *gambia
          <<: *yardstick-arm-receivers

    # yamllint enable rule:key-duplicates
    jobs:
      - '{dockerrepo}-docker-build-arm-push-{stream}'
