---
- project:
    name: ovn4nfv

    project: '{name}'
    project-name: '{name}'

    stream:
      - master:
          branch: '{stream}'
          gs-pathname: ''
          disabled: false
      - fraser: &fraser
          branch: 'stable/{stream}'
          gs-pathname: '/{stream}'
          disabled: false

    build-timeout: 60
    build-node: 'opnfv-build'
    gerrit-server-name: 'gerrit.opnfv.org'
    jenkins-ssh-credential: 'd42411ac011ad6f3dd2e1fa34eaa5d87f910eb2e'

    rtd-build-url: 'https://readthedocs.org/api/v2/webhook/opnfv-ovn4nfv/47203/'
    rtd-token: '1fefa79785dc36fa4851198a9f5482d11ec43e67'
    project-pattern: '{project}'

    jobs:
      - 'ovn4nfv-build-{stream}'
      - '{project-name}-rtd-jobs'

- job-template:
    name: 'ovn4nfv-build-{stream}'

    concurrent: true

    disabled: '{obj:disabled}'

    properties:
      - logrotate-default
      - throttle:
          enabled: true
          max-total: 1
          max-per-node: 1
          option: 'project'

    parameters:
      - project-parameter:
          project: '{project}'
          branch: '{branch}'
      - opnfv-build-defaults

    scm:
      - git-scm

    triggers:
      - timed: 'H 23 * * *'

    builders:
      - 'ovn4nfv-build-macro'

- builder:
    name: 'ovn4nfv-build-macro'
    builders:
      - shell: |
          #!/bin/bash

          echo "hello world"
