---
- project:
    name: docs-rtd
    project: 'opnfvdocs'
    project-name: 'opnfvdocs'
    rtd-build-url: 'https://readthedocs.org/api/v2/webhook/opnfvdocsdemo/79560/'
    rtd-token: 'a96c3622a270344cf9bf3f73b0dfa04f59fc59c0'
    project-pattern: 'opnfvdocs'
    jobs:
      - '{project-name}-rtd-jobs'
      - 'gerrit-tox-verify':
          python-version: python3
          tox-envs: "docs"
          build-days-to-keep: 7
      - 'docs-merge-rtd-{stream}'

    stream:
      - master:
          branch: 'master'
      - lakelse:
          branch: 'stable/{stream}'
      - iruya:
          branch: 'stable/{stream}'
      - jerma:
          branch: 'stable/{stream}'

- job-template:
    name: 'docs-merge-rtd-{stream}'

    project-type: freestyle

    parameters:
      - label:
          name: SLAVE_LABEL
          default: 'lf-build5'
          description: 'Slave label on Jenkins'
          all-nodes: false
          node-eligibility: 'ignore-offline'
      - project-parameter:
          project: '{project}'
          branch: '{branch}'

    triggers:
      - gerrit-trigger-change-merged:
          project: '**'
          branch: '{branch}'
          files: 'docs/**/*.*'

    builders:
      - 'remove-old-docs-from-opnfv-artifacts'
