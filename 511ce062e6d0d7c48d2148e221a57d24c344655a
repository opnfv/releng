{
  "comments": [
    {
      "key": {
        "uuid": "fa3479d7_52f39473",
        "filename": "jjb/doctor/docu-build.sh",
        "patchSetId": 6
      },
      "lineNbr": 19,
      "author": {
        "id": 254
      },
      "writtenOn": "2015-07-03T06:28:21Z",
      "side": 1,
      "message": "I am thinking of storing all the documents under review in same folder to not mix real documents with the documents still under review. So my proposal is \n\n  gs_path_change\u003d\"artifacts.opnfv.org/review/$GERRIT_CHANGE_NUMBER\"\n\nThe link to document under review will be posted to gerrit as a comment so reviewers will be able to find it easily.",
      "range": {
        "startLine": 19,
        "startChar": 36,
        "endLine": 19,
        "endChar": 51
      },
      "revId": "511ce062e6d0d7c48d2148e221a57d24c344655a",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa3479d7_32e8107c",
        "filename": "jjb/doctor/docu-build.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 254
      },
      "writtenOn": "2015-07-03T06:28:21Z",
      "side": 1,
      "message": "We had a discussion regarding this some time ago and decided to store documents for different branches as below.\n\nmaster: directly stored without branch name\n  gs_path_branch\u003d\"artifacts.opnfv.org/$GERRIT_PROJECT\"\n\nstable/arno: stored under the directory named after release \n  gs_path_branch\u003d\"artifacts.opnfv.org/$GERRIT_PROJECT/arno\"",
      "range": {
        "startLine": 20,
        "startChar": 52,
        "endLine": 20,
        "endChar": 66
      },
      "revId": "511ce062e6d0d7c48d2148e221a57d24c344655a",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa3479d7_12ed0c8c",
        "filename": "jjb/doctor/docu-build.sh",
        "patchSetId": 6
      },
      "lineNbr": 22,
      "author": {
        "id": 254
      },
      "writtenOn": "2015-07-03T06:28:21Z",
      "side": 1,
      "message": "this doesn\u0027t cover daily jobs or jobs that are triggered by non-gerrit events such as manually or timer trigger so using job name in if clause makes things simpler.\n\nI propose you to change this to \n\n  if [[ $JOB_NAME \u003d~ \"verify\" ]] ; then\n\nand then you cover all the jobs we currently have.\n\nAlso the logic should be opposite; the documents generated by verify jobs should end up in gs_path_change and the documents generated by merge and daily jobs should end up in real location, gs_path_branch.",
      "range": {
        "startLine": 22,
        "startChar": 6,
        "endLine": 22,
        "endChar": 42
      },
      "revId": "511ce062e6d0d7c48d2148e221a57d24c344655a",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa3479d7_f201683a",
        "filename": "jjb/doctor/docu-build.sh",
        "patchSetId": 6
      },
      "lineNbr": 39,
      "author": {
        "id": 254
      },
      "writtenOn": "2015-07-03T06:28:21Z",
      "side": 1,
      "message": "this looks dangerous.\n\ncan we make sure the path is correctly constructed by checking to see if $GERRIT_CHANGE_NUMBER, $GERRIT_PROJECT, and $GERRIT_BRANCH vars defined in first couple of lines of this script to make sure we don\u0027t remove other things due to some quirks in gerrit or jenkins?\n\nalso can we be more explicit and use true here please to show the intention clearly - we can\u0027t expect everyone to easily see what purpose colon serves here.\n\n  gsutil rm -r \"gs://$gs_path_change\" || true",
      "range": {
        "startLine": 39,
        "startChar": 4,
        "endLine": 39,
        "endChar": 44
      },
      "revId": "511ce062e6d0d7c48d2148e221a57d24c344655a",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}