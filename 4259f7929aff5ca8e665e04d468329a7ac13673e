{
  "comments": [
    {
      "key": {
        "uuid": "da5c1566_e881924b",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5391
      },
      "writtenOn": "2018-07-03T11:41:13Z",
      "side": 1,
      "message": "I run this command, but I don\u0027t get the container.",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_030ae920",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 6613
      },
      "writtenOn": "2018-07-04T02:02:41Z",
      "side": 1,
      "message": "would you redirect your output of \"docker ps -a\" to a file and send to me? i try to figure out the gap between our test env. thanks.",
      "parentUuid": "da5c1566_e881924b",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_4313415c",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5391
      },
      "writtenOn": "2018-07-04T03:18:29Z",
      "side": 1,
      "message": "sorry, I didn\u0027t add \"opnfv/\" in DOCKER_REPO_NAME. I get the result after adding. could you tell me why need change?",
      "parentUuid": "da5c1566_030ae920",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_831d5969",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 6613
      },
      "writtenOn": "2018-07-04T03:27:55Z",
      "side": 1,
      "message": "for example, if opnfv/compass-tasks building is done, this code will be called to remove the image. it finds the image by calling \"grep opnfv/compass-tasks\".\n\nbut \"grep opnfv/compass-tasks\" will also match opnfv/compass-tasks-base and try to remove it as well.\n\nthere are chances another building, say opnfv/compass-tasks-k8s is running on the same host, and it depends on opnfv/compass-tasks-base, this will cause error. error log url is pasted in commit message.",
      "parentUuid": "da5c1566_4313415c",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_a3f85c7d",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5391
      },
      "writtenOn": "2018-07-05T08:55:35Z",
      "side": 1,
      "message": "According to the log, it failed to delete the image, due to dependent image existing. for example, we want to delete the compass-tasks-base, if compass-tasks-k8s or compass-tasks-osa exist, we can\u0027t delete the compass-tasks-base. in my opinion this patch don\u0027t fix this issue, what do you think?",
      "parentUuid": "da5c1566_831d5969",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_638484d4",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 6613
      },
      "writtenOn": "2018-07-05T09:23:50Z",
      "side": 1,
      "message": "Per my understanding and testing, it\u0027s not a problem.\n\nIf we\u0027re building compass-tasks-k8s and compass-tasks-osa on one host, there will be three images: compass-tasks-k8s, compass-tasks-osa and pulled base image compass-tasks-base.\n\nWhen compass-tasks-k8s finishes, only compass-tasks-k8s is deleted, compass-tasks-base is not deleted, same for compass-tasks-osa. When all building jobs finish, compass-tasks-base is still there, it will only be deleted next time compass-tasks-base builds.\n\ncompass-tasks-base is built before other tasks, without concurrency, so I think it\u0027s not a problem. https://github.com/opnfv/releng/blob/master/jjb/releng/compass4nfv-docker.yaml#L96-L102",
      "parentUuid": "da5c1566_a3f85c7d",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_469fce52",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5391
      },
      "writtenOn": "2018-07-06T02:46:46Z",
      "side": 1,
      "message": "It work well, if its builds is successful every time. But if some error happened during building compass-tasks-k8s, it didn\u0027t remove the compass-tasks-k8s image. we would failed to build compass-tasks-base next time. It can\u0027t remove the compass-tasks images due to dependence. this is my opinion. we can merged this patch and check the result. What do you think?",
      "parentUuid": "da5c1566_638484d4",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_c6aabe6f",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 6613
      },
      "writtenOn": "2018-07-06T02:56:54Z",
      "side": 1,
      "message": "yes, this looks a problem.\ni think we can merge this patch first, it just makes sure we won\u0027t try to remove wrong images, and to fix other issues in new patches if necessary.",
      "parentUuid": "da5c1566_469fce52",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_06bcb6ba",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 5391
      },
      "writtenOn": "2018-07-06T02:58:44Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "da5c1566_c6aabe6f",
      "range": {
        "startLine": 31,
        "startChar": 16,
        "endLine": 31,
        "endChar": 60
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da5c1566_28938aa4",
        "filename": "jjb/releng/opnfv-docker.sh",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 5391
      },
      "writtenOn": "2018-07-03T11:41:13Z",
      "side": 1,
      "message": "I run this command, I don\u0027t get image neither",
      "range": {
        "startLine": 52,
        "startChar": 16,
        "endLine": 52,
        "endChar": 58
      },
      "revId": "4259f7929aff5ca8e665e04d468329a7ac13673e",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}