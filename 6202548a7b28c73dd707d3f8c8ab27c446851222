{
  "comments": [
    {
      "key": {
        "uuid": "1acb0d3e_54491d8a",
        "filename": "jjb/infra/bifrost-cleanup-job.yml",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 6
      },
      "writtenOn": "2017-02-03T18:38:01Z",
      "side": 1,
      "message": "Please put in some kind of check here, it would be a disaster if  $BIFROST_GS_URL was somehow set to gs://artifacts.opnfv.org/ or gs://artifacts.opnfv.org/$project",
      "range": {
        "startLine": 62,
        "startChar": 12,
        "endLine": 62,
        "endChar": 40
      },
      "revId": "6202548a7b28c73dd707d3f8c8ab27c446851222",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1acb0d3e_d4542d23",
        "filename": "jjb/infra/bifrost-cleanup-job.yml",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 6
      },
      "writtenOn": "2017-02-03T18:39:46Z",
      "side": 1,
      "message": "for example, lets only let this run if the string contains \"bifrost\" that should be reasonably safe.",
      "range": {
        "startLine": 62,
        "startChar": 12,
        "endLine": 62,
        "endChar": 40
      },
      "revId": "6202548a7b28c73dd707d3f8c8ab27c446851222",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1acb0d3e_40f632d9",
        "filename": "jjb/infra/bifrost-cleanup-job.yml",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 5473
      },
      "writtenOn": "2017-02-08T10:01:43Z",
      "side": 1,
      "message": "Well I see what you mean but this variable is only defined a few lines above. But yeah, OK, I will make this safer.",
      "parentUuid": "1acb0d3e_54491d8a",
      "range": {
        "startLine": 62,
        "startChar": 12,
        "endLine": 62,
        "endChar": 40
      },
      "revId": "6202548a7b28c73dd707d3f8c8ab27c446851222",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1acb0d3e_e0408837",
        "filename": "jjb/infra/bifrost-cleanup-job.yml",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 483
      },
      "writtenOn": "2017-02-03T03:33:37Z",
      "side": 1,
      "message": "this job will only be triggered when the patch is got merged.\n\nfor \u0027recheck\u0027 and \u0027reverify\u0027 the build script shall deal with the history logs or it can be be overwritten by the new copy.\nor the build task will be blocked by this type of cleanup work. It\u0027s too complex.\n\nIMO, only one line is meaningful in this job, \"gsutil rm -r $BIFROST_GS_URL\", so we can add this into the original scripts or just add an additional step with postbuildscript",
      "range": {
        "startLine": 124,
        "startChar": 16,
        "endLine": 124,
        "endChar": 45
      },
      "revId": "6202548a7b28c73dd707d3f8c8ab27c446851222",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1acb0d3e_0086f4b9",
        "filename": "jjb/infra/bifrost-cleanup-job.yml",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 5473
      },
      "writtenOn": "2017-02-03T09:48:29Z",
      "side": 1,
      "message": "So I am not 100% I get this but the reason we can\u0027t add it in the original task is that we don\u0027t want to wipe the logs before the patchset is merged. And the verify jobs do not get triggered on patchset merges. They are not gate jobs.\n\nThe recheck and reverify comments are correctly addressed by the verify jobs. They verify jobs will wipe the old jobs for the particular patchset/revision and upload new ones. This job is about wiping the entire patchset/ directory when it\u0027s merged and it is no longer useful to have around",
      "parentUuid": "1acb0d3e_e0408837",
      "range": {
        "startLine": 124,
        "startChar": 16,
        "endLine": 124,
        "endChar": 45
      },
      "revId": "6202548a7b28c73dd707d3f8c8ab27c446851222",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1acb0d3e_14f5d582",
        "filename": "jjb/infra/bifrost-cleanup-job.yml",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 483
      },
      "writtenOn": "2017-02-03T15:39:00Z",
      "side": 1,
      "message": "We can trigger this work item after the patch got merged without add a job, just add a step.\n\nreferring to file jjb/global/releng-macros.yml line 11, \"7. postbuilders (maven only, configured like Builders)\" you can add a step named postbuilders. I don\u0027t find an existed example in opnfv.\n\n@Fatih, I don\u0027t know whether Post-Build Script Plug-in is installed in opnfv or how to support postbuilders without this plugin.",
      "parentUuid": "1acb0d3e_0086f4b9",
      "range": {
        "startLine": 124,
        "startChar": 16,
        "endLine": 124,
        "endChar": 45
      },
      "revId": "6202548a7b28c73dd707d3f8c8ab27c446851222",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}